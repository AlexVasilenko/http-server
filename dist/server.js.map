{"version":3,"sources":["../src/server.js"],"names":["PUBLICROOT","get","server","createServer","on","req","res","contentType","lookup","setHeader","stat","then","stats","size","writeHead","stream","createReadStream","pipe","err","console","error","catch"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,aAAa,iBAAOC,GAAP,CAAW,YAAX,CAAnB;AACA,MAAMC,SAAS,eAAOC,YAAP,EAAf;;AAEAD,OACGE,EADH,CACM,SADN,EACiB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3B,QAAMC,cAAc,eAAKC,MAAL,CAAa,GAAER,UAAW,WAA1B,CAApB;AACAM,MAAIG,SAAJ,CAAc,cAAd,EAA8BF,WAA9B;;AAEA,eAAGG,IAAH,CAAS,GAAEV,UAAW,WAAtB,EACGW,IADH,CACSC,KAAD,IAAW;AACfN,QAAIG,SAAJ,CAAc,gBAAd,EAAgCG,MAAMC,IAAtC;AACAP,QAAIQ,SAAJ,CAAc,GAAd;;AAEA,UAAMC,SAAS,aAAGC,gBAAH,CAAqB,GAAEhB,UAAW,WAAlC,EAA8CiB,IAA9C,CAAmDX,GAAnD,CAAf;;AAEAS,WAAOX,EAAP,CAAU,OAAV,EAAoBc,GAAD,IAAS;AAC1BC,cAAQC,KAAR,CAAc,uBAAd,EAAuCF,GAAvC;AACD,KAFD;AAGD,GAVH,EAWGG,KAXH,CAWUD,KAAD,IAAW;AAAED,YAAQC,KAAR,CAAcA,KAAd;AAAsB,GAX5C;AAYD,CAjBH,EAkBGhB,EAlBH,CAkBM,OAlBN,EAkBgBgB,KAAD,IAAW;AAAED,UAAQC,KAAR,CAAcA,KAAd;AAAsB,CAlBlD;;kBAoBelB,M","file":"server.js","sourcesContent":["import fs from 'mz/fs';\nimport mime from 'mime';\nimport config from 'config';\nimport myHttp from './http';\n\nconst PUBLICROOT = config.get('publicRoot');\nconst server = myHttp.createServer();\n\nserver\n  .on('request', (req, res) => {\n    const contentType = mime.lookup(`${PUBLICROOT}/foo.html`);\n    res.setHeader('Content-Type', contentType);\n\n    fs.stat(`${PUBLICROOT}/foo.html`)\n      .then((stats) => {\n        res.setHeader('Content-Length', stats.size);\n        res.writeHead(200);\n\n        const stream = fs.createReadStream(`${PUBLICROOT}/foo.html`).pipe(res);\n\n        stream.on('error', (err) => {\n          console.error('The error raised was:', err);\n        })\n      })\n      .catch((error) => { console.error(error) })\n  })\n  .on('error', (error) => { console.error(error) })\n\nexport default server;"]}